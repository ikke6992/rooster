<h1 class="font-bold" i18n>Edit Group {{ group.groupNumber }}</h1>
<form [formGroup]="editGroup" (ngSubmit)="onSubmit()">
  <label for="field" i18n>Field: </label>
  <input id="field" type="text" formControlName="field" required /><br />
  <label for="color" i18n>Color: </label>
  <input id="color" type="color" formControlName="color" required /><br />
  <label for="number-of-students" i18n>Number of students: </label>
  <input
    id="number-of-students"
    type="number"
    formControlName="numberOfStudents"
    required
  /><br />

  <label for="start-date" i18n>Start Date: </label>main
  <input
    id="start-date"
    type="date"
    formControlName="startDate"
    required
  /><br /><br />

  <h1 i18n>Phase 1:</h1>
  <label for="days-phase-1" i18n>Days per week: </label>
  <input
    id="days-phase-1"
    type="number"
    formControlName="daysPhase1"
    required
  /><br />
  <label for="weeks-phase-1" i18n>Amount of weeks: </label> main
  <input
    id="weeks-phase-1"
    type="number"
    formControlName="weeksPhase1"
    required
  /><br /><br />

  <h1 i18n>Phase 2:</h1>
  <label for="days-phase-2" i18n>Days per week: </label>
  <input
    id="days-phase-2"
    type="number"
    formControlName="daysPhase2"
    required
  /><br />
  <label for="weeks-phase-2" i18n>Amount of weeks: </label>
  <input
    id="weeks-phase-2"
    type="number"
    formControlName="weeksPhase2"
    required
  /><br /><br />

  <h1 i18n>Phase 3:</h1>
  <label for="days-phase-3" i18n>Days per week: </label>
  <input
    id="days-phase-3"
    type="number"
    formControlName="daysPhase3"
    required
  /><br />
  <label for="weeks-phase-3" i18n>Amount of weeks: </label>
  <input
    id="weeks-phase-3"
    type="number"
    formControlName="weeksPhase3"
    required
  /><br /><br />

  <label for="teachers" i18n>Teachers: </label>
  <select multiple id="teachers">
    <option [ngValue]="null" disabled>Double Click to Select Teacher</option>
    <option
      *ngFor="let teacher of teachers"
      [ngValue]="teacherAssignments"
      (dblclick)="
        showModal('group-' + group.groupNumber + '-set-teacher-' + teacher.name)
      "
    >
      {{ teacher.name }}
    </option></select
  ><br />
  <table>
    <tr *ngIf="teacherAssignments.length !== 0">
      <th i18n>Teacher</th>
      <th i18n>Days Phase 1</th>
      <th i18n>Days Phase 2</th>
      <th i18n>Days Phase 3</th>
      <th i18n>Edit</th>
      <th i18n>Delete</th>
    </tr>
    <tr *ngFor="let teacherAssignment of teacherAssignments">
      <td>{{ teacherAssignment.name }}</td>
      <td>{{ teacherAssignment.daysPhase1 }}</td>
      <td>{{ teacherAssignment.daysPhase2 }}</td>
      <td>{{ teacherAssignment.daysPhase3 }}</td>
      <td>
        <button
          type="button"
          (click)="
            showModal(
              'group-' +
                group.groupNumber +
                '-set-teacher-' +
                teacherAssignment.name
            )
          "
          i18n
        >
          Edit
        </button>
      </td>
      <td>
        <button type="button" (click)="removeAssignment(teacherAssignment)" i18n>
          Delete
        </button>
      </td>
    </tr>
  </table>

  <button
    [ngClass]="editGroup.valid ? 'button-action' : 'button-incomplete'"
    type="submit"
    [disabled]="!editGroup.valid"
    i18n
  >
    Submit
  </button>
</form>

<div *ngFor="let teacher of teachers">
  <app-modal
    id="group-{{ group.groupNumber }}-set-teacher-{{ teacher.name }}"
    class="hhidden"
  >
    <app-set-teacher
      [teacher]="getTeacherAssignment(teacher)"
      (messageEvent)="receiveMessage($event)"
    ></app-set-teacher>
    <button
      (click)="
        closeModal(
          'group-' + group.groupNumber + '-set-teacher-' + teacher.name
        )
      "
      class="button-action"
      i18n
    >
      Close
    </button>
  </app-modal>
</div>

<app-modal id="feedback-edit-group-{{ group.groupNumber }}" class="hhidden">
  <p>{{ this.feedbackMsg }}</p>
  <button
    class="button-action"
    (click)="
      this.feedbackMsg.startsWith('Error: ')
        ? closeModal('feedback-edit-group-' + group.groupNumber)
        : window.location.reload()
    "
    i18n
  >
    Close
  </button>
</app-modal>
